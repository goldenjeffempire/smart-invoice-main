services:
  - type: web
    name: invoiceflow
    env: python
    plan: free
    region: oregon
    buildCommand: ./build.sh
    startCommand: gunicorn invoiceflow.wsgi:application --config gunicorn.conf.py
    healthCheckPath: /health/
    domains:
      - invoiceflow.com.ng
      - www.invoiceflow.com.ng
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: invoiceflow.settings
      - key: PYTHON_VERSION
        value: 3.11.13
      - key: DEBUG
        value: "false"
      - key: PRODUCTION
        value: "true"
      - key: WEB_CONCURRENCY
        value: "4"
      - key: GUNICORN_THREADS
        value: "4"
      - key: GUNICORN_WORKER_CLASS
        value: gthread
      - key: GUNICORN_LOG_LEVEL
        value: info
      - key: RENDER
        value: "true"
      - key: RENDER_SERVICE_NAME
        value: invoiceflow
      - key: ALLOWED_HOSTS
        value: "invoiceflow.com.ng,.invoiceflow.com.ng,www.invoiceflow.com.ng"
      - key: CSRF_TRUSTED_ORIGINS
        value: "https://invoiceflow.com.ng,https://www.invoiceflow.com.ng"
      - key: WEBHOOK_BASE_URL
        value: "https://invoiceflow.com.ng"
      - key: API_BASE_URL
        value: "https://invoiceflow.com.ng"
      - key: SECRET_KEY
        sync: false
      - key: ENCRYPTION_SALT
        sync: false
      - key: SENDGRID_API_KEY
        sync: false
      - key: SENDGRID_FROM_EMAIL
        sync: false
      - key: SENDGRID_INVOICE_READY_TEMPLATE_ID
        sync: false
      - key: SENDGRID_INVOICE_PAID_TEMPLATE_ID
        sync: false
      - key: SENDGRID_PAYMENT_REMINDER_TEMPLATE_ID
        sync: false
      - key: SENDGRID_NEW_USER_WELCOME_TEMPLATE_ID
        sync: false
      - key: SENDGRID_PASSWORD_RESET_TEMPLATE_ID
        sync: false
      - key: SENDGRID_ADMIN_ALERT_TEMPLATE_ID
        sync: false
      - key: SENTRY_DSN
        sync: false
      - key: PAYSTACK_SECRET_KEY
        sync: false
      - key: PAYSTACK_PUBLIC_KEY
        sync: false
      - key: PAYSTACK_WEBHOOK_SECRET
        sync: false

databases:
  - name: postgres-db
    databaseName: invoiceflow
    user: invoiceflow
    plan: free
    region: oregon
    ipAllowList: []
