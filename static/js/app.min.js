!function(){"use strict";const t={toast:{defaultDuration:5e3,zIndex:1700},animations:{observerThreshold:.1,observerMargin:"0px 0px -100px 0px",staggerDelay:100,counterDuration:2e3},navbar:{scrollThreshold:10}},e={isValidEmail:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),isValidUrl(t){try{return new URL(t),!0}catch{return!1}},debounce(t,e){let s;return function(...n){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),t(...n)},e)}}};class s{constructor(){this.loader=document.querySelector(".page-loader"),this.init()}init(){window.addEventListener("load",()=>{setTimeout(()=>{this.loader&&this.loader.classList.add("hidden"),document.body.classList.add("animate-page-enter")},300)})}}class n{constructor(){this.container=this.createContainer()}createContainer(){let e=document.getElementById("toast-container");return e||(e=document.createElement("div"),e.id="toast-container",e.className="fixed top-4 right-4 z-50 space-y-2 pointer-events-none",e.style.zIndex=t.toast.zIndex,document.body.appendChild(e)),e}show(e,s="info",n=t.toast.defaultDuration){const o=document.createElement("div");o.className=`${{success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[s]} text-white px-6 py-4 rounded-lg shadow-xl flex items-center space-x-3 transform transition-all duration-300 translate-x-full opacity-0 max-w-md pointer-events-auto`,o.innerHTML=`\n                <div class="flex-shrink-0">${{success:'<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>',error:'<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>',warning:'<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg>',info:'<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></svg>'}[s]}</div>\n                <div class="flex-1 font-medium">${e}</div>\n                <button class="flex-shrink-0 hover:bg-white/20 rounded p-1 transition" onclick="this.parentElement.remove()" aria-label="Close notification">\n                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>\n                </button>\n            `,this.container.appendChild(o),requestAnimationFrame(()=>{o.classList.remove("translate-x-full","opacity-0")}),n>0&&setTimeout(()=>{o.classList.add("translate-x-full","opacity-0"),setTimeout(()=>o.remove(),300)},n)}}class o{constructor(){this.forms=document.querySelectorAll("form[data-validate]"),this.init()}init(){this.forms.forEach(t=>{t.addEventListener("submit",e=>this.handleSubmit(e,t));t.querySelectorAll("input[required], textarea[required], select[required]").forEach(t=>{t.addEventListener("blur",()=>this.validateField(t)),t.addEventListener("input",()=>this.clearError(t))})}),this.setupFormInteractions()}setupFormInteractions(){document.querySelectorAll("input, textarea, select").forEach(t=>{t.addEventListener("focus",function(){this.closest(".form-group")?.classList.add("focused")}),t.addEventListener("blur",function(){this.value||this.closest(".form-group")?.classList.remove("focused")})})}validateField(t){const s=t.value.trim(),n=t.type;let o=null;if(t.hasAttribute("required")&&!s)o="This field is required";else if("email"===n&&s&&!e.isValidEmail(s))o="Please enter a valid email address";else if("url"===n&&s&&!e.isValidUrl(s))o="Please enter a valid URL";else if(t.hasAttribute("minlength")){const e=parseInt(t.getAttribute("minlength"));s.length<e&&(o=`Minimum length is ${e} characters`)}return o?(this.showError(t,o),!1):(this.clearError(t),!0)}showError(t,e){this.clearError(t),t.classList.add("border-red-500","form-input-error"),t.setAttribute("aria-invalid","true");const s=document.createElement("div");s.className="form-error",s.textContent=e,s.setAttribute("role","alert"),t.parentNode.appendChild(s)}clearError(t){t.classList.remove("border-red-500","form-input-error"),t.removeAttribute("aria-invalid");const e=t.parentNode.querySelector(".form-error");e&&e.remove()}handleSubmit(t,e){let s=!0;e.querySelectorAll("input[required], textarea[required], select[required]").forEach(t=>{this.validateField(t)||(s=!1)}),s||(t.preventDefault(),window.toast.show("Please fix the errors in the form","error"))}}class a{constructor(){this.init()}init(){document.addEventListener("click",t=>{if(t.target.matches("[data-modal-trigger]")){const e=t.target.getAttribute("data-modal-trigger");this.open(e)}else(t.target.matches("[data-modal-close]")||t.target.classList.contains("modal-backdrop"))&&this.close(t.target.closest(".modal-backdrop"))}),document.addEventListener("keydown",t=>{if("Escape"===t.key){const t=document.querySelector(".modal-backdrop");t&&this.close(t)}})}open(t){const e=document.getElementById(t);if(e){e.classList.remove("hidden"),e.classList.add("animate-fade-in"),document.body.style.overflow="hidden";const t=e.querySelector("button, input, select, textarea, a[href]");t&&setTimeout(()=>t.focus(),100)}}close(t){t&&(t.classList.add("opacity-0"),setTimeout(()=>{t.classList.add("hidden"),t.classList.remove("opacity-0","animate-fade-in"),document.body.style.overflow=""},200))}}class i{constructor(){this.init()}init(){this.setupScrollAnimations(),this.setupStaggerAnimations(),this.setupCounterAnimations(),this.setupLazyLoadImages()}setupScrollAnimations(){const e=document.querySelectorAll(".fade-up, .fade-in-view, [data-animate]"),s=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("opacity-100","translate-y-0","animate-slide-in-up"),t.target.classList.remove("opacity-0","translate-y-8"),s.unobserve(t.target))})},{threshold:t.animations.observerThreshold,rootMargin:t.animations.observerMargin});e.forEach(t=>{t.classList.add("opacity-0","translate-y-8","transition-all","duration-700"),s.observe(t)})}setupStaggerAnimations(){document.querySelectorAll("[data-stagger]").forEach((e,s)=>{e.style.animationDelay=s*t.animations.staggerDelay+"ms"})}setupCounterAnimations(){const t=document.querySelectorAll(".counter"),e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(this.animateCounter(t.target),e.unobserve(t.target))})},{threshold:.5});t.forEach(t=>e.observe(t))}setupLazyLoadImages(){if(!("IntersectionObserver"in window))return;const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const s=e.target;s.dataset.src&&(s.src=s.dataset.src,s.classList.add("fade-in")),t.unobserve(s)}})});document.querySelectorAll("img[data-src]").forEach(e=>{t.observe(e)})}animateCounter(e){const s=parseInt(e.getAttribute("data-target")||e.textContent),n=e.getAttribute("data-prefix")||"",o=e.getAttribute("data-suffix")||"",a=t.animations.counterDuration,i=s/(a/16);let r=0;const l=()=>{r+=i,r<s?(e.textContent=n+Math.floor(r).toLocaleString()+o,requestAnimationFrame(l)):e.textContent=n+s.toLocaleString()+o};l()}}class r{constructor(){this.init()}init(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",e=>{const s=t.getAttribute("href");if("#"!==s&&""!==s){const t=document.querySelector(s);if(t){e.preventDefault();const s=80,n=t.getBoundingClientRect().top+window.pageYOffset-s;window.scrollTo({top:n,behavior:"smooth"})}}})})}}class l{constructor(){this.navbar=document.querySelector("nav"),this.navbar&&this.init()}init(){const s=e.debounce(()=>{window.scrollY>t.navbar.scrollThreshold?this.navbar.classList.add("shadow-md","backdrop-blur-sm"):this.navbar.classList.remove("shadow-md","backdrop-blur-sm")},10);window.addEventListener("scroll",s,{passive:!0})}}class c{constructor(){this.init()}init(){document.addEventListener("click",t=>{const e=t.target.closest("button, a.btn");e&&!e.hasAttribute("data-no-ripple")&&this.createRipple(t,e)})}createRipple(t,e){const s=document.createElement("span"),n=e.getBoundingClientRect(),o=Math.max(n.width,n.height),a=t.clientX-n.left-o/2,i=t.clientY-n.top-o/2;s.style.width=s.style.height=o+"px",s.style.left=a+"px",s.style.top=i+"px",s.classList.add("ripple"),e.style.position=e.style.position||"relative",e.style.overflow="hidden",e.appendChild(s),setTimeout(()=>s.remove(),600)}}class d{constructor(){this.init()}init(){document.querySelectorAll("[data-tooltip]").forEach(t=>{t.addEventListener("mouseenter",()=>this.show(t)),t.addEventListener("mouseleave",()=>this.hide(t)),t.addEventListener("focus",()=>this.show(t)),t.addEventListener("blur",()=>this.hide(t))})}show(t){const e=t.getAttribute("data-tooltip"),s=document.createElement("div");s.className="tooltip fixed bg-gray-900 text-white text-sm px-3 py-2 rounded shadow-lg z-50 pointer-events-none animate-fade-in",s.style.zIndex="1600",s.textContent=e,s.id=`tooltip-${Date.now()}`,document.body.appendChild(s);const n=t.getBoundingClientRect();s.style.left=n.left+n.width/2-s.offsetWidth/2+"px",s.style.top=n.top-s.offsetHeight-8+"px",t.setAttribute("data-tooltip-id",s.id)}hide(t){const e=t.getAttribute("data-tooltip-id");if(e){const s=document.getElementById(e);s&&s.remove(),t.removeAttribute("data-tooltip-id")}}}class u{constructor(){this.init()}init(){document.querySelectorAll(".alert[data-auto-dismiss]").forEach(e=>{const s=parseInt(e.getAttribute("data-auto-dismiss"))||t.toast.defaultDuration;setTimeout(()=>{e.style.transition="opacity 300ms ease, transform 300ms ease",e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>e.remove(),300)},s)});document.querySelectorAll('.alert[role="alert"]:not([data-auto-dismiss])').forEach(e=>{e.setAttribute("data-auto-dismiss",t.toast.defaultDuration.toString())})}}class h{constructor(){this.init()}init(){document.addEventListener("click",t=>{if(t.target.matches("[data-confirm]")){const e=t.target.getAttribute("data-confirm");confirm(e)||(t.preventDefault(),t.stopPropagation())}})}}class m{constructor(){this.init()}init(){document.addEventListener("keydown",t=>{"Tab"===t.key&&document.body.classList.add("keyboard-nav")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-nav")})}}class p{constructor(){this.init()}init(){document.addEventListener("click",async t=>{if(t.target.matches("[data-copy]")){const e=t.target.getAttribute("data-copy");try{await navigator.clipboard.writeText(e),window.toast.show("Copied to clipboard!","success",2e3)}catch(t){window.toast.show("Failed to copy","error")}}})}}class g{constructor(){this.sessionId=this.generateSessionId(),this.init()}generateSessionId(){return"sess_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}init(){this.hasConsent()?(this.trackPageView(),this.trackButtonClicks(),this.trackFormSubmissions(),this.trackScrollDepth(),this.trackTimeOnPage()):console.log("[Analytics] Tracking disabled - no consent")}track(t,e={}){const s={event:t,timestamp:(new Date).toISOString(),sessionId:this.sessionId,url:window.location.href,referrer:document.referrer,userAgent:navigator.userAgent,...e};console.log("[Analytics]",s),this.hasConsent()&&this.sendToBackend(s)}hasConsent(){return document.cookie.includes("analytics_consent=true")}sendToBackend(t){navigator.sendBeacon?navigator.sendBeacon("/api/analytics/",JSON.stringify(t)):fetch("/api/analytics/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}).catch(t=>console.warn("Analytics send failed:",t))}trackPageView(){this.track("page_view",{title:document.title,path:window.location.pathname})}trackButtonClicks(){document.addEventListener("click",t=>{const e=t.target.closest('button, a.btn, [role="button"]');e&&this.track("button_click",{label:e.textContent.trim().substring(0,50),href:e.href||null,type:e.tagName.toLowerCase()}),t.target.closest('[href*="signup"]')&&this.track("cta_click",{location:this.getElementLocation(t.target),text:t.target.textContent.trim()})})}trackFormSubmissions(){document.addEventListener("submit",t=>{if("FORM"===t.target.tagName){const e=t.target.id||"unnamed-form",s=t.target.action||window.location.href;this.track("form_submit",{formId:e,action:s,method:t.target.method||"GET"})}})}trackScrollDepth(){let t=0;const s=e.debounce(()=>{const e=Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100);e>t&&(t=e,t>=25&&t<50?this.track("scroll_depth",{depth:"25%"}):t>=50&&t<75?this.track("scroll_depth",{depth:"50%"}):t>=75&&t<90?this.track("scroll_depth",{depth:"75%"}):t>=90&&this.track("scroll_depth",{depth:"90%+"}))},500);window.addEventListener("scroll",s)}trackTimeOnPage(){const t=Date.now();window.addEventListener("beforeunload",()=>{const e=Math.round((Date.now()-t)/1e3);this.track("time_on_page",{seconds:e,minutes:Math.round(e/60)})})}getElementLocation(t){let e="unknown";const s=t.closest("section");return s&&(e=s.className.split(" ")[0]||"section"),e}}function v(){new s,window.toast=new n,new o,new a,new i,new r,new l,new c,new d,new u,new h,new m,new p,window.analytics=new g,document.body.classList.remove("no-js"),document.body.classList.add("js-enabled"),console.log("Smart Invoice v3.0 initialized successfully")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",v):v()}();